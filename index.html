<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scanner</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background-color: var(--tg-theme-bg-color, #fff);
            color: var(--tg-theme-text-color, #000);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: sans-serif;
        }
        h1 { margin-bottom: 20px; }
        #status { font-size: 18px; color: var(--tg-theme-hint-color, #888); }
    </style>
</head>
<body>
    <h1>Warehouse Scanner</h1>
    <p id="status">Launching camera...</p>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();

        // Функція сканування
        function scan() {
            // Викликаємо нативний метод Телеграму
            tg.showScanQrPopup({
                text: "Наведіть камеру на QR-код деталі" 
            }, function (text) {
                // Ця функція спрацює, коли код буде знайдено
                
                // 1. Закриваємо сканер
                tg.closeScanQrPopup(); 
                
                // 2. Відправляємо дані (UUID) боту
                tg.sendData(text); 
            });
        }

        // Запускаємо сканер одразу при відкритті
        // Можна додати кнопку, але автоматично зручніше
        scan();
    </script>
</body>
</html>